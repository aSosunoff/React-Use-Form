{"version":3,"sources":["webpack:///./index.ts","webpack:///./use-component-did-update.ts","webpack:///./use-form.ts","webpack:///./utils.ts","webpack:///external \"react\"","webpack:///webpack/bootstrap","webpack:///webpack/startup"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["export { useForm } from \"./use-form\";\nimport { InitialForm } from \"./types\";\nexport type InitialFormType<T extends keyof any> = InitialForm<T>;\n","import { DependencyList, EffectCallback, useEffect, useRef } from \"react\";\n\nexport const useComponentDidUpdate = (\n  effect: EffectCallback,\n  dependencies?: DependencyList\n) => {\n  const hasMounted = useRef(true);\n\n  useEffect(() => {\n    if (hasMounted.current) {\n      hasMounted.current = false;\n      return;\n    }\n\n    return effect();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, dependencies);\n};\n","import { useCallback, useMemo, useState } from \"react\";\nimport { InitialForm, ISetValue } from \"./types\";\nimport { useComponentDidUpdate } from \"./use-component-did-update\";\nimport { initialFn, isPrimitive, reduceConfigTransform } from \"./utils\";\n\nexport const useForm = <T extends InitialForm<any>>(initialForm: T) => {\n  const [form, setForm] = useState(() => initialFn(initialForm));\n\n  useComponentDidUpdate(() => {\n    setForm(() => initialFn(initialForm));\n  }, [initialForm]);\n\n  const values = useMemo(\n    () => reduceConfigTransform(form, ({ value }) => value),\n    [form]\n  );\n\n  const setValue = useCallback((key, value, touched) => {\n    if (typeof key === \"object\") {\n      setForm((prev) =>\n        reduceConfigTransform(prev, (config, field) => {\n          if (!(field in key)) {\n            return config;\n          }\n\n          let _value;\n          let _touched;\n\n          if (Array.isArray(key[field]) || isPrimitive(key[field])) {\n            _value = key[field];\n          } else {\n            _value = key[field].value;\n            _touched = key[field].touched;\n          }\n\n          return {\n            ...config,\n            error: config.validation && config.validation(_value),\n            touched: _touched ?? config.touched,\n            value: _value ?? config.value,\n          };\n        })\n      );\n    } else {\n      setForm((prev) => {\n        const config = prev[key];\n        return {\n          ...prev,\n          [key]: {\n            ...config,\n            error: config.validation && config.validation(value),\n            touched: touched ?? config.touched,\n            value,\n          },\n        };\n      });\n    }\n  }, []);\n\n  const onChange = useCallback(\n    (key: any) => <T extends HTMLTextAreaElement | HTMLInputElement>(\n      ev: React.ChangeEvent<T> | any\n    ) => {\n      setValue(key, ev.target ? ev.target.value : ev, true);\n    },\n    [setValue]\n  );\n\n  const handlers = useMemo(\n    () =>\n      reduceConfigTransform(form, (config, key) => ({\n        ...config,\n        onChange: onChange(key),\n      })),\n    [onChange, form]\n  );\n\n  const isInvalidForm = useMemo(\n    () =>\n      Object.values(form).reduce(\n        (acc, { error }) => acc || Boolean(error),\n        false\n      ),\n    [form]\n  );\n\n  const resetHandler = useCallback(\n    () => setForm(() => initialFn(initialForm)),\n    [initialForm]\n  );\n\n  return {\n    values,\n    handlers,\n    resetHandler,\n    setValue: setValue as ISetValue<T>,\n    isInvalidForm,\n  };\n};\n","import { InitialForm, ReduceConfigTransformType } from \"./types\";\n\nexport const isPrimitive = <T>(value: T) => value !== Object(value);\n\nexport const reduceConfigTransform: ReduceConfigTransformType = (\n  obj,\n  callback\n) =>\n  Object.entries(obj).reduce(\n    (acc, [key, config]) => ({\n      ...acc,\n      [key]: callback(config, key as any, obj),\n    }),\n    {} as any\n  );\n\nexport const initialFn = <T extends InitialForm<any>>(initialForm: T) =>\n  reduceConfigTransform(initialForm, (config) => ({\n    ...config,\n    touched: false,\n    error: config.validation && config.validation(config.value),\n  }));\n","module.exports = __WEBPACK_EXTERNAL_MODULE__297__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(447);\n"],"sourceRoot":""}